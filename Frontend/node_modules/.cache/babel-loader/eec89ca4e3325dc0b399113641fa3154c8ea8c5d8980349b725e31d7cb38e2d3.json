{"ast":null,"code":"/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { buffer } from '@tensorflow/tfjs-core';\n/**\n * An implementation of the tile kernel shared between webgl and cpu for string\n * tensors only.\n */\nexport function tileImpl(xBuf, reps) {\n  const newShape = new Array(xBuf.rank);\n  for (let i = 0; i < newShape.length; i++) {\n    newShape[i] = xBuf.shape[i] * reps[i];\n  }\n  const result = buffer(newShape, xBuf.dtype);\n  for (let i = 0; i < result.values.length; ++i) {\n    const newLoc = result.indexToLoc(i);\n    const originalLoc = new Array(xBuf.rank);\n    for (let j = 0; j < originalLoc.length; j++) {\n      originalLoc[j] = newLoc[j] % xBuf.shape[j];\n    }\n    const originalIndex = xBuf.locToIndex(originalLoc);\n    result.values[i] = xBuf.values[originalIndex];\n  }\n  return result;\n}","map":{"version":3,"names":["buffer","tileImpl","xBuf","reps","newShape","Array","rank","i","length","shape","result","dtype","values","newLoc","indexToLoc","originalLoc","j","originalIndex","locToIndex"],"sources":["/Users/jonchen/Documents/HackPSU/tfjs-backend-cpu/src/kernels/Tile_impl.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {buffer, DataType, Rank, TensorBuffer} from '@tensorflow/tfjs-core';\n\n/**\n * An implementation of the tile kernel shared between webgl and cpu for string\n * tensors only.\n */\n\nexport function tileImpl<R extends Rank>(\n    xBuf: TensorBuffer<R, DataType>,\n    reps: number[]): TensorBuffer<R, DataType> {\n  const newShape: number[] = new Array(xBuf.rank);\n  for (let i = 0; i < newShape.length; i++) {\n    newShape[i] = xBuf.shape[i] * reps[i];\n  }\n  const result = buffer(newShape, xBuf.dtype);\n  for (let i = 0; i < result.values.length; ++i) {\n    const newLoc = result.indexToLoc(i);\n\n    const originalLoc: number[] = new Array(xBuf.rank);\n    for (let j = 0; j < originalLoc.length; j++) {\n      originalLoc[j] = newLoc[j] % xBuf.shape[j];\n    }\n\n    const originalIndex = xBuf.locToIndex(originalLoc);\n\n    result.values[i] = xBuf.values[originalIndex];\n  }\n  return result as TensorBuffer<R, DataType>;\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAiBA,SAAQA,MAAM,QAAqC,uBAAuB;AAE1E;;;;AAKA,OAAM,SAAUC,QAAQA,CACpBC,IAA+B,EAC/BC,IAAc;EAChB,MAAMC,QAAQ,GAAa,IAAIC,KAAK,CAACH,IAAI,CAACI,IAAI,CAAC;EAC/C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,QAAQ,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;IACxCH,QAAQ,CAACG,CAAC,CAAC,GAAGL,IAAI,CAACO,KAAK,CAACF,CAAC,CAAC,GAAGJ,IAAI,CAACI,CAAC,CAAC;;EAEvC,MAAMG,MAAM,GAAGV,MAAM,CAACI,QAAQ,EAAEF,IAAI,CAACS,KAAK,CAAC;EAC3C,KAAK,IAAIJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGG,MAAM,CAACE,MAAM,CAACJ,MAAM,EAAE,EAAED,CAAC,EAAE;IAC7C,MAAMM,MAAM,GAAGH,MAAM,CAACI,UAAU,CAACP,CAAC,CAAC;IAEnC,MAAMQ,WAAW,GAAa,IAAIV,KAAK,CAACH,IAAI,CAACI,IAAI,CAAC;IAClD,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,WAAW,CAACP,MAAM,EAAEQ,CAAC,EAAE,EAAE;MAC3CD,WAAW,CAACC,CAAC,CAAC,GAAGH,MAAM,CAACG,CAAC,CAAC,GAAGd,IAAI,CAACO,KAAK,CAACO,CAAC,CAAC;;IAG5C,MAAMC,aAAa,GAAGf,IAAI,CAACgB,UAAU,CAACH,WAAW,CAAC;IAElDL,MAAM,CAACE,MAAM,CAACL,CAAC,CAAC,GAAGL,IAAI,CAACU,MAAM,CAACK,aAAa,CAAC;;EAE/C,OAAOP,MAAmC;AAC5C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}