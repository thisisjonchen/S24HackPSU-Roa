{"ast":null,"code":"/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Fill, util } from '@tensorflow/tfjs-core';\nimport { FillProgram } from '../fill_gpu';\nexport function fill(args) {\n  const {\n    backend,\n    attrs\n  } = args;\n  const {\n    shape,\n    value\n  } = attrs;\n  let {\n    dtype\n  } = attrs;\n  dtype = dtype || util.inferDtype(value);\n  if (dtype === 'string') {\n    // String type should be handled in CPU memory.\n    const values = util.getArrayFromDType(dtype, util.sizeFromShape(shape));\n    values.fill(value);\n    return backend.makeTensorInfo(shape, dtype, values);\n  } else {\n    const program = new FillProgram(shape, value);\n    const customValues = [[value]];\n    return backend.runWebGLProgram(program, [], dtype, customValues);\n  }\n}\nexport const fillConfig = {\n  kernelName: Fill,\n  backendName: 'webgl',\n  kernelFunc: fill\n};","map":{"version":3,"names":["Fill","util","FillProgram","fill","args","backend","attrs","shape","value","dtype","inferDtype","values","getArrayFromDType","sizeFromShape","makeTensorInfo","program","customValues","runWebGLProgram","fillConfig","kernelName","backendName","kernelFunc"],"sources":["/Users/jonchen/Documents/HackPSU/tfjs-backend-webgl/src/kernels/Fill.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {Fill, FillAttrs, KernelConfig, KernelFunc, TensorInfo, util} from '@tensorflow/tfjs-core';\n\nimport {MathBackendWebGL} from '../backend_webgl';\nimport {FillProgram} from '../fill_gpu';\n\nexport function fill(args: {backend: MathBackendWebGL, attrs: FillAttrs}):\n    TensorInfo {\n  const {backend, attrs} = args;\n  const {shape, value} = attrs;\n  let {dtype} = attrs;\n\n  dtype = dtype || util.inferDtype(value);\n\n  if (dtype === 'string') {\n    // String type should be handled in CPU memory.\n    const values = util.getArrayFromDType(dtype, util.sizeFromShape(shape));\n    values.fill(value as string);\n    return backend.makeTensorInfo(shape, dtype, values);\n  } else {\n    const program = new FillProgram(shape, value as number);\n    const customValues = [[value as number]];\n    return backend.runWebGLProgram(program, [], dtype, customValues);\n  }\n}\n\nexport const fillConfig: KernelConfig = {\n  kernelName: Fill,\n  backendName: 'webgl',\n  kernelFunc: fill as unknown as KernelFunc\n};\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAiBA,SAAQA,IAAI,EAAmDC,IAAI,QAAO,uBAAuB;AAGjG,SAAQC,WAAW,QAAO,aAAa;AAEvC,OAAM,SAAUC,IAAIA,CAACC,IAAmD;EAEtE,MAAM;IAACC,OAAO;IAAEC;EAAK,CAAC,GAAGF,IAAI;EAC7B,MAAM;IAACG,KAAK;IAAEC;EAAK,CAAC,GAAGF,KAAK;EAC5B,IAAI;IAACG;EAAK,CAAC,GAAGH,KAAK;EAEnBG,KAAK,GAAGA,KAAK,IAAIR,IAAI,CAACS,UAAU,CAACF,KAAK,CAAC;EAEvC,IAAIC,KAAK,KAAK,QAAQ,EAAE;IACtB;IACA,MAAME,MAAM,GAAGV,IAAI,CAACW,iBAAiB,CAACH,KAAK,EAAER,IAAI,CAACY,aAAa,CAACN,KAAK,CAAC,CAAC;IACvEI,MAAM,CAACR,IAAI,CAACK,KAAe,CAAC;IAC5B,OAAOH,OAAO,CAACS,cAAc,CAACP,KAAK,EAAEE,KAAK,EAAEE,MAAM,CAAC;GACpD,MAAM;IACL,MAAMI,OAAO,GAAG,IAAIb,WAAW,CAACK,KAAK,EAAEC,KAAe,CAAC;IACvD,MAAMQ,YAAY,GAAG,CAAC,CAACR,KAAe,CAAC,CAAC;IACxC,OAAOH,OAAO,CAACY,eAAe,CAACF,OAAO,EAAE,EAAE,EAAEN,KAAK,EAAEO,YAAY,CAAC;;AAEpE;AAEA,OAAO,MAAME,UAAU,GAAiB;EACtCC,UAAU,EAAEnB,IAAI;EAChBoB,WAAW,EAAE,OAAO;EACpBC,UAAU,EAAElB;CACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}